<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>nonholo_control: src/robot_mainframe.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nonholo_control
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">robot_mainframe.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;std_srvs/SetBool.h&quot;</code><br />
<code>#include &quot;std_srvs/Empty.h&quot;</code><br />
<code>#include &quot;std_msgs/Empty.h&quot;</code><br />
<code>#include &quot;topic_tools/MuxSelect.h&quot;</code><br />
<code>#include &quot;nav_msgs/Odometry.h&quot;</code><br />
<code>#include &quot;move_base_msgs/MoveBaseActionGoal.h&quot;</code><br />
<code>#include &quot;<a class="el" href="map__library_8h_source.html">nonholo_control/map_library.h</a>&quot;</code><br />
<code>#include &quot;nonholo_control/TargetPos.h&quot;</code><br />
<code>#include &quot;nonholo_control/UIMenu.h&quot;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for robot_mainframe.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="robot__mainframe_8cpp__incl.png" border="0" usemap="#src_2robot__mainframe_8cpp" alt=""/></div>
<map name="src_2robot__mainframe_8cpp" id="src_2robot__mainframe_8cpp">
<area shape="rect" id="node9" href="map__library_8h.html" title="nonholo_control/map\l_library.h" alt="" coords="1175,80,1332,121"/>
</map>
</div>
</div>
<p><a href="robot__mainframe_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3b60c8b389d62783efcd7e1b683e4e2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a3b60c8b389d62783efcd7e1b683e4e2d">publish_target</a> ()</td></tr>
<tr class="separator:a3b60c8b389d62783efcd7e1b683e4e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2472fce178d8b8316cba3b24e9551d90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a2472fce178d8b8316cba3b24e9551d90">set_plan_algo</a> (std::string new_plan)</td></tr>
<tr class="separator:a2472fce178d8b8316cba3b24e9551d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7177d902688d4e84b31deb70683ade2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a7177d902688d4e84b31deb70683ade2b">change_drive</a> (int new_drive)</td></tr>
<tr class="separator:a7177d902688d4e84b31deb70683ade2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef70658f8ec02213922917e67d9e1c76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#aef70658f8ec02213922917e67d9e1c76">subscriberCallback</a> (const nav_msgs::Odometry::ConstPtr &amp;pose_msg)</td></tr>
<tr class="separator:aef70658f8ec02213922917e67d9e1c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0a699592177c7c3af2b98174934c54"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#abc0a699592177c7c3af2b98174934c54">pointDist</a> (geometry_msgs::Point p1, geometry_msgs::Point p2)</td></tr>
<tr class="separator:abc0a699592177c7c3af2b98174934c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f9e0fa6007a2b14a3624fdea36a79f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a22f9e0fa6007a2b14a3624fdea36a79f">errPos</a> ()</td></tr>
<tr class="separator:a22f9e0fa6007a2b14a3624fdea36a79f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31f8568d3564a1e7f0c6c914e5f6c684"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a31f8568d3564a1e7f0c6c914e5f6c684">targetReachedCallback</a> (const std_msgs::Empty::ConstPtr &amp;empty)</td></tr>
<tr class="separator:a31f8568d3564a1e7f0c6c914e5f6c684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37adf3f429c75bdd9e954bcc654ff9cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a37adf3f429c75bdd9e954bcc654ff9cf">targetUnreachableCallback</a> (const std_msgs::Empty::ConstPtr &amp;empty)</td></tr>
<tr class="separator:a37adf3f429c75bdd9e954bcc654ff9cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa6143039a62c14a68483337aaa5e74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a0fa6143039a62c14a68483337aaa5e74">simpleRecovery</a> ()</td></tr>
<tr class="separator:a0fa6143039a62c14a68483337aaa5e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a415fc86ef11fed4538200e24d7cc4e4c"><td class="memItemLeft" align="right" valign="top">nonholo_control::TargetPos&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a415fc86ef11fed4538200e24d7cc4e4c">target_srv</a></td></tr>
<tr class="separator:a415fc86ef11fed4538200e24d7cc4e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace4c6dd9534eca46f1394c5f907eb16e"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ace4c6dd9534eca46f1394c5f907eb16e">client_target_rand</a></td></tr>
<tr class="separator:ace4c6dd9534eca46f1394c5f907eb16e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4e87f28bbd1024471c7f1b942af5b6"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a2d4e87f28bbd1024471c7f1b942af5b6">client_target_user</a></td></tr>
<tr class="separator:a2d4e87f28bbd1024471c7f1b942af5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a350594df3e8f6948c8462edfd41ce086"><td class="memItemLeft" align="right" valign="top">ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a350594df3e8f6948c8462edfd41ce086">pub</a></td></tr>
<tr class="separator:a350594df3e8f6948c8462edfd41ce086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737051118f7d0a3c2e19f6fdf141bc5c"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a737051118f7d0a3c2e19f6fdf141bc5c">client_go_to_point</a></td></tr>
<tr class="separator:a737051118f7d0a3c2e19f6fdf141bc5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4ee4ef916ee4c730110f9ab2e4e20e"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a4c4ee4ef916ee4c730110f9ab2e4e20e">client_wall_follow</a></td></tr>
<tr class="separator:a4c4ee4ef916ee4c730110f9ab2e4e20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14800b5845bc3d2c933cf629be687a5f"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a14800b5845bc3d2c933cf629be687a5f">client_ui_menu</a></td></tr>
<tr class="separator:a14800b5845bc3d2c933cf629be687a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50bd61ee51d7d0fafe324fb17dec49b"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ab50bd61ee51d7d0fafe324fb17dec49b">mux_cmd_vel</a></td></tr>
<tr class="separator:ab50bd61ee51d7d0fafe324fb17dec49b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573f2b2cd613634bf9569cb4edee635b"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a573f2b2cd613634bf9569cb4edee635b">client_bug_restart</a></td></tr>
<tr class="separator:a573f2b2cd613634bf9569cb4edee635b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a43af3f57698df849e9b8452e9de12"><td class="memItemLeft" align="right" valign="top">ros::ServiceClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a44a43af3f57698df849e9b8452e9de12">client_UI_shutdown</a></td></tr>
<tr class="separator:a44a43af3f57698df849e9b8452e9de12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a780203c5a5ca66149d83069dd42bc535"><td class="memItemLeft" align="right" valign="top">geometry_msgs::Point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a780203c5a5ca66149d83069dd42bc535">target_position</a></td></tr>
<tr class="separator:a780203c5a5ca66149d83069dd42bc535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad21dac7011f1455d5563308d8a79a904"><td class="memItemLeft" align="right" valign="top">geometry_msgs::Point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ad21dac7011f1455d5563308d8a79a904">previous_target_position</a></td></tr>
<tr class="separator:ad21dac7011f1455d5563308d8a79a904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9cfb31b126881b1d7231471ba3a5e8f"><td class="memItemLeft" align="right" valign="top">geometry_msgs::Point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ae9cfb31b126881b1d7231471ba3a5e8f">current_position</a></td></tr>
<tr class="separator:ae9cfb31b126881b1d7231471ba3a5e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82510f2ac271f2c705871ad806bcdf4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a82510f2ac271f2c705871ad806bcdf4f">drive_algo</a> = <a class="el" href="map__library_8h.html#adadbcd17d1191482401c7f3a8ce2b0fd">MOVE_BASE_DRIVE</a></td></tr>
<tr class="separator:a82510f2ac271f2c705871ad806bcdf4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d20aa21d8d1363f5ef8096f59b4d8e"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ae7d20aa21d8d1363f5ef8096f59b4d8e">state_</a> = <a class="el" href="map__library_8h.html#a7d7920c1e51cc4eef80206ebd6fee3f4">STATE_WAITING</a></td></tr>
<tr class="separator:ae7d20aa21d8d1363f5ef8096f59b4d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f439efb1f4e7a1926c6401ccddff832"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a9f439efb1f4e7a1926c6401ccddff832">_target_reached</a> = false</td></tr>
<tr class="separator:a9f439efb1f4e7a1926c6401ccddff832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bab851596373a463137c571cb67701a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a1bab851596373a463137c571cb67701a">_target_unreachable</a> = false</td></tr>
<tr class="separator:a1bab851596373a463137c571cb67701a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75b58e567c6e88e318fc023b7d6f16a"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ae75b58e567c6e88e318fc023b7d6f16a">plan_algo_map</a></td></tr>
<tr class="separator:ae75b58e567c6e88e318fc023b7d6f16a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db8520b5159efb77d60c4aa05256e4f"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, int &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#a2db8520b5159efb77d60c4aa05256e4f">plan_algo_map_it</a></td></tr>
<tr class="separator:a2db8520b5159efb77d60c4aa05256e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8dd3a3af5e9b44db344028e62f347a5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robot__mainframe_8cpp.html#ab8dd3a3af5e9b44db344028e62f347a5">plan_algo_used</a></td></tr>
<tr class="separator:ab8dd3a3af5e9b44db344028e62f347a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7177d902688d4e84b31deb70683ade2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void change_drive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_drive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that updates the behaviour of the planning algorithm used.</p>
<p>It first updates the reference to the algorithm, then uses a multiplexer to select which of the remapped cmd_vel outputs to use, either the move_base or bug0 one. It also calls the swithcer for wall_follow and go_to_point behaviour to set that behaviour (notice how they do not impact the driving mode move_base as a planner to a goal). In the function the value of the parameter 'wall_follow_active' is set as well, denoting if the wall follow behaviour is in act, in order to "mute" the bug0 service calls to go_to_point and wall_follow in the meantime.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_drive</td><td>(int): the ID of the planning parameter to use:<br />
 0 -&gt; move_base<br />
 1 -&gt; bug0<br />
 2 -&gt; wall follow<br />
 3 -&gt; stop (unused)<br />
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00136">136</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a22f9e0fa6007a2b14a3624fdea36a79f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double errPos </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function computing the distance of the current robot position with respect to the target position.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errPos</td><td>(double): the euclidean distance between current and target position; </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00224">224</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00300">300</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="abc0a699592177c7c3af2b98174934c54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pointDist </td>
          <td>(</td>
          <td class="paramtype">geometry_msgs::Point&#160;</td>
          <td class="paramname"><em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">geometry_msgs::Point&#160;</td>
          <td class="paramname"><em>p2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Routine returning the distance between two points.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p1</td><td>(geometry_msgs::Point&amp;): first point; </td></tr>
    <tr><td class="paramname">p2</td><td>(geometry_msgs::Point&amp;): second point; </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">pointDist</td><td>(double): the euclidean distance between p1 and p2; </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00210">210</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3b60c8b389d62783efcd7e1b683e4e2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void publish_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Routine to publish a target position (goal), stored as a global attribute</p>
<p>This function displays the menu with options the user can choose from. The input choice is inserted in the 'response' field of the service. Note the different way the two algorithms require to indicate the goal position, with move_base reading it from a topic (move_base_action_goal) and bug0 reading it from the parameter server. </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00074">74</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2472fce178d8b8316cba3b24e9551d90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_plan_algo </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>new_plan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that updates the reference to the planning algorithm used.</p>
<p>The update is both local and on the value stored in the parameter server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_plan</td><td>(std::string): name of the algorithm, as presented in the keys of the map in the parameters; </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00102">102</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0fa6143039a62c14a68483337aaa5e74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void simpleRecovery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Routine performing a trivial form of recovery behaviour.</p>
<p>The rovot is supposed to end up in this case only when performing path planning using the 'bug_m' algorithm, since the 'move_base' already has its own (quite more thought out) way of detecting and dealing with recovery behaviours. The robot is sent back to the previous target position, considered to be safe, using 'move_base' planning (more robust than bug0). First the 'bug' node needs to be restarted, in order for it to read the new target position (more on that in the documentation).</p>
<p>Notice that the routine has the side effect of modifying the current planning algorithm to 'move_base', even in the case it previously were 'bug0'. </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00282">282</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aef70658f8ec02213922917e67d9e1c76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void subscriberCallback </td>
          <td>(</td>
          <td class="paramtype">const nav_msgs::Odometry::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>pose_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback executed every time a message on topic /odom is published, updating the current robot position.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose_msg</td><td>(const nav_msgs::Odometry::ConstPtr&amp;): content of the message read; </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00193">193</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a31f8568d3564a1e7f0c6c914e5f6c684"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void targetReachedCallback </td>
          <td>(</td>
          <td class="paramtype">const std_msgs::Empty::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>empty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback executed every time a message on topic /target_reached is published.</p>
<p>The global variable _target_reached is set to 'true'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">empty</td><td>(const std_msgs::Empty::ConstPtr&amp;): reference to empty message (unused); </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00239">239</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a37adf3f429c75bdd9e954bcc654ff9cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void targetUnreachableCallback </td>
          <td>(</td>
          <td class="paramtype">const std_msgs::Empty::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>empty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback executed every time a message on topic /target_unreachable is published.</p>
<p>The global variable _target_unreachable is set to 'true'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">empty</td><td>(const std_msgs::Empty::ConstPtr&amp;): reference to empty message, unused; </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00254">254</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a9f439efb1f4e7a1926c6401ccddff832"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool _target_reached = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00047">47</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1bab851596373a463137c571cb67701a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool _target_unreachable = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00048">48</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a573f2b2cd613634bf9569cb4edee635b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_bug_restart</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to call a rospy script using 'roslaunch' API to restart 'bug' node </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00038">38</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a737051118f7d0a3c2e19f6fdf141bc5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_go_to_point</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Service client enabling go to point directly </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00033">33</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ace4c6dd9534eca46f1394c5f907eb16e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_target_rand</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Service client used for obtaining random target positions </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00029">29</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2d4e87f28bbd1024471c7f1b942af5b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_target_user</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Service client used for obtaining user defined target positions </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00030">30</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a14800b5845bc3d2c933cf629be687a5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_ui_menu</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Service client used to communicate with the UI </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00035">35</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a44a43af3f57698df849e9b8452e9de12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_UI_shutdown</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to inform the 'user_interface' node of this node shutting down </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00039">39</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4c4ee4ef916ee4c730110f9ab2e4e20e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient client_wall_follow</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Service client enabling wall follow directly </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00034">34</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae9cfb31b126881b1d7231471ba3a5e8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">geometry_msgs::Point current_position</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current position of the robot, defined as a Point </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00043">43</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a82510f2ac271f2c705871ad806bcdf4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int drive_algo = <a class="el" href="map__library_8h.html#adadbcd17d1191482401c7f3a8ce2b0fd">MOVE_BASE_DRIVE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00045">45</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab50bd61ee51d7d0fafe324fb17dec49b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::ServiceClient mux_cmd_vel</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allowing for multiplexing between multiple robot driving sources </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00037">37</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae75b58e567c6e88e318fc023b7d6f16a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, int&gt; plan_algo_map</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Map of the available planning alogorithms "name":ID, retrieved from parameter server </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00050">50</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2db8520b5159efb77d60c4aa05256e4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, int&gt;::iterator plan_algo_map_it</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iterator moving on the planning algorithms map </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00052">52</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab8dd3a3af5e9b44db344028e62f347a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string plan_algo_used</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Name of the planning algorithm used </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00053">53</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad21dac7011f1455d5563308d8a79a904"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">geometry_msgs::Point previous_target_position</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Target position to reach, defined as a Point </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00042">42</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a350594df3e8f6948c8462edfd41ce086"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Publisher pub</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Publisher used to publish velocities </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00031">31</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae7d20aa21d8d1363f5ef8096f59b4d8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char state_ = <a class="el" href="map__library_8h.html#a7d7920c1e51cc4eef80206ebd6fee3f4">STATE_WAITING</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00046">46</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a780203c5a5ca66149d83069dd42bc535"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">geometry_msgs::Point target_position</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Target position to reach, defined as a Point </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00041">41</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a415fc86ef11fed4538200e24d7cc4e4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nonholo_control::TargetPos target_srv</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the main node in the package, the one which runs and coordinates (almost) all the others, responsible for dictating which of the available planning algorithm drives the robot toward the received goal. Notice that this node actually does minimal computing, while delegating the various tasks to other nodes.Service entityy where target position will be inserted into by one of the appropriate services </p>

<p>Definition at line <a class="el" href="robot__mainframe_8cpp_source.html#l00028">28</a> of file <a class="el" href="robot__mainframe_8cpp_source.html">robot_mainframe.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
